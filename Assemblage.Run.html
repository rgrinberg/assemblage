<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Assemblage.Dir.html">
<link rel="next" href="Assemblage.Project.html">
<link rel="Up" href="Assemblage.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Assemblage" rel="Chapter" href="Assemblage.html">
<link title="Assemblage_driver" rel="Chapter" href="Assemblage_driver.html">
<link title="Assemblage_tools" rel="Chapter" href="Assemblage_tools.html">
<link title="Ast_merlin" rel="Chapter" href="Ast_merlin.html">
<link title="Ast_meta" rel="Chapter" href="Ast_meta.html">
<link title="Ast_opam" rel="Chapter" href="Ast_opam.html">
<link title="As_acmd" rel="Chapter" href="As_acmd.html">
<link title="As_action" rel="Chapter" href="As_action.html">
<link title="As_action_ocaml" rel="Chapter" href="As_action_ocaml.html">
<link title="As_args" rel="Chapter" href="As_args.html">
<link title="As_cmd" rel="Chapter" href="As_cmd.html">
<link title="As_conf" rel="Chapter" href="As_conf.html">
<link title="As_ctx" rel="Chapter" href="As_ctx.html">
<link title="As_fmt" rel="Chapter" href="As_fmt.html">
<link title="As_log" rel="Chapter" href="As_log.html">
<link title="As_ocamlfind" rel="Chapter" href="As_ocamlfind.html">
<link title="As_part" rel="Chapter" href="As_part.html">
<link title="As_part_bin" rel="Chapter" href="As_part_bin.html">
<link title="As_part_dir" rel="Chapter" href="As_part_dir.html">
<link title="As_part_doc" rel="Chapter" href="As_part_doc.html">
<link title="As_part_lib" rel="Chapter" href="As_part_lib.html">
<link title="As_part_pkg" rel="Chapter" href="As_part_pkg.html">
<link title="As_part_run" rel="Chapter" href="As_part_run.html">
<link title="As_part_unit" rel="Chapter" href="As_part_unit.html">
<link title="As_path" rel="Chapter" href="As_path.html">
<link title="As_pkg_config" rel="Chapter" href="As_pkg_config.html">
<link title="As_project" rel="Chapter" href="As_project.html">
<link title="As_string" rel="Chapter" href="As_string.html">
<link title="As_univ" rel="Chapter" href="As_univ.html">
<link title="Builder_makefile" rel="Chapter" href="Builder_makefile.html">
<link title="Cmd_base" rel="Chapter" href="Cmd_base.html">
<link title="Cmd_build" rel="Chapter" href="Cmd_build.html">
<link title="Cmd_describe" rel="Chapter" href="Cmd_describe.html">
<link title="Cmd_help" rel="Chapter" href="Cmd_help.html">
<link title="Cmd_product" rel="Chapter" href="Cmd_product.html">
<link title="Cmd_setup" rel="Chapter" href="Cmd_setup.html">
<link title="Makefile" rel="Chapter" href="Makefile.html"><link title="Runs" rel="Section" href="#1_Runs">
<title>Assemblage.Run</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Assemblage.Dir.html" title="Assemblage.Dir">Previous</a>
&nbsp;<a class="up" href="Assemblage.html" title="Assemblage">Up</a>
&nbsp;<a class="post" href="Assemblage.Project.html" title="Assemblage.Project">Next</a>
</div>
<h1>Module <a href="type_Assemblage.Run.html">Assemblage.Run</a></h1>

<pre><span class="keyword">module</span> Run: <code class="code"><span class="keyword">sig</span></code> <a href="Assemblage.Run.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Runs.
<p>

    A run is an <a href="Assemblage.Action.html">action</a> whose commands are always run even if
    the inputs are up to date. Runs are typically used to run the
    project's test suites or other convenience development executions.
<p>

    Strictly speaking a run action is not part of the build system but
    it can input products of the build system to ensure they exist
    when the run is executed. The run part gives us an explicit name
    to invoke the run.
<p>

    <b>Important.</b> Since runs always execute their action you should
    usually not use them for generating build products.
<p>

    <b>FIXME</b> What's the semantics of outputs for a Run ?<br>
</div>
<hr width="100%">
<br>
<h1 id="1_Runs">Runs</h1><br>

<pre><span id="VALv"><span class="keyword">val</span> v</span> : <code class="type">?usage:<a href="Assemblage.Part.html#TYPEusage">Assemblage.Part.usage</a> -><br>       ?exists:bool <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       ?args:<a href="Assemblage.Args.html#TYPEt">Assemblage.Args.t</a> -><br>       ?dir:<a href="Assemblage.Path.html#TYPEt">Assemblage.Path.t</a> <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       string -><br>       <a href="Assemblage.Action.html#TYPEt">Assemblage.Action.t</a> <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       [< <a href="Assemblage.html#TYPEpart_kind">Assemblage.part_kind</a> > `Run ] <a href="Assemblage.html#TYPEpart">Assemblage.part</a></code></pre><div class="info ">
<code class="code">v dir name action</code> is a run that executes the action
      <code class="code">action</code>. If <code class="code">dir</code> is specified an <a href="Assemblage.Acmd.html#VALcd"><code class="code"><span class="constructor">Assemblage</span>.<span class="constructor">Acmd</span>.cd</code></a> command to that
      directory is added in front of <code class="code">action</code>'s commands. Otherwise
      the commands are executed from the <a href="Assemblage.Conf.html#VALroot_dir"><code class="code"><span class="constructor">Assemblage</span>.<span class="constructor">Conf</span>.root_dir</code></a> directory.<br>
</div>

<pre><span id="VALwith_bin"><span class="keyword">val</span> with_bin</span> : <code class="type">?usage:<a href="Assemblage.Part.html#TYPEusage">Assemblage.Part.usage</a> -><br>       ?exists:bool <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       ?args:<a href="Assemblage.Args.html#TYPEt">Assemblage.Args.t</a> -><br>       ?dir:<a href="Assemblage.Path.html#TYPEt">Assemblage.Path.t</a> <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       ?name:string -><br>       ?ext:<a href="Assemblage.Path.html#TYPEext">Assemblage.Path.ext</a> -><br>       [< `Bin ] <a href="Assemblage.html#TYPEpart">Assemblage.part</a> -><br>       (<a href="Assemblage.Acmd.html#TYPEcmd">Assemblage.Acmd.cmd</a> -> <a href="Assemblage.Acmd.html#TYPEt">Assemblage.Acmd.t</a> list) <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       [< <a href="Assemblage.html#TYPEpart_kind">Assemblage.part_kind</a> > `Run ] <a href="Assemblage.html#TYPEpart">Assemblage.part</a></code></pre><div class="info ">
<code class="code">with_bin dir ext bin cmds</code> is a run that executes the sequence
      of commands <code class="code"><span class="constructor">Conf</span>.(cmds $ <span class="constructor">Bin</span>.of_cmd ext bin)</code>. <code class="code">name</code> is the
      name of the run; if unspecified this is derived from the <code class="code">bin</code>
      part.  <code class="code">ext</code> is the binary to select see <a href="Assemblage.Bin.html#VALto_cmd"><code class="code"><span class="constructor">Assemblage</span>.<span class="constructor">Bin</span>.to_cmd</code></a>.
<p>

      The binary is automatically added to the inputs of run's action
      and the resulting part only exists if the executable does.<br>
</div>

<pre><span id="VALbin"><span class="keyword">val</span> bin</span> : <code class="type">?usage:<a href="Assemblage.Part.html#TYPEusage">Assemblage.Part.usage</a> -><br>       ?exists:bool <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       ?args:<a href="Assemblage.Args.html#TYPEt">Assemblage.Args.t</a> -><br>       ?dir:<a href="Assemblage.Path.html#TYPEt">Assemblage.Path.t</a> <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       ?name:string -><br>       ?ext:<a href="Assemblage.Path.html#TYPEext">Assemblage.Path.ext</a> -><br>       ?stdin:<a href="Assemblage.Path.html#TYPEt">Assemblage.Path.t</a> <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       ?stdout:<a href="Assemblage.Path.html#TYPEt">Assemblage.Path.t</a> <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       ?stderr:<a href="Assemblage.Path.html#TYPEt">Assemblage.Path.t</a> <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       [< `Bin ] <a href="Assemblage.html#TYPEpart">Assemblage.part</a> -><br>       string list <a href="Assemblage.Conf.html#TYPEvalue">Assemblage.Conf.value</a> -><br>       [< <a href="Assemblage.html#TYPEpart_kind">Assemblage.part_kind</a> > `Run ] <a href="Assemblage.html#TYPEpart">Assemblage.part</a></code></pre><div class="info ">
<code class="code">bin bin args</code> is like <a href="Assemblage.Run.html#VALwith_bin"><code class="code"><span class="constructor">Assemblage</span>.<span class="constructor">Run</span>.with_bin</code></a> but directly executes the binary
      with <code class="code">args</code> and redirects its outputs as specified.<br>
</div>
</body></html>